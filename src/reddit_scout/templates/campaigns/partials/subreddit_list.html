<div id="subreddit-list">
    {% if error %}
    <div class="alert alert-error alert-sm mb-3">
        <span>{{ error }}</span>
    </div>
    {% endif %}

    <form
        hx-post="/campaigns/{{ campaign.id }}/subreddits"
        hx-target="#subreddit-list"
        hx-swap="outerHTML"
        class="flex gap-2 mb-3"
    >
        <input
            type="text"
            name="subreddit_name"
            placeholder="e.g., python or r/python"
            class="input input-bordered input-sm flex-1"
        />
        <button type="submit" class="btn btn-primary btn-sm">Add</button>
        <button type="button" onclick="discovery_modal.showModal()" class="btn btn-outline btn-sm">Discover</button>
    </form>

    {% if campaign.subreddits %}
    <div class="flex flex-wrap gap-2">
        {% for sub in campaign.subreddits %}
        <div class="badge badge-outline gap-1 pr-1">
            r/{{ sub.subreddit_name }}
            <button
                hx-delete="/campaigns/{{ campaign.id }}/subreddits/{{ sub.id }}"
                hx-target="#subreddit-list"
                hx-swap="outerHTML"
                hx-confirm="Remove r/{{ sub.subreddit_name }}?"
                class="btn btn-ghost btn-xs btn-circle"
            >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-base-content/50 text-sm">No subreddits added yet.</p>
    {% endif %}
</div>
